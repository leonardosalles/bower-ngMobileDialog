!function(){"use strict";angular.module("ngMobileDialog.controllers",[]).controller("ngMobileDialogController",function(){}),angular.module("ngMobileDialog",["ngMobileDialog.controllers"]).provider("$dialog",function(){var e=this;e.multiple=!1,e.headers={},e.currentScopes={},e.$get=["$timeout","$compile","$rootScope","$controller","$injector","$q","$http","$templateCache",function(o,t,r,l,n,a,i,s){function c(e,o){this.options=e,this.modalEl=o}return c.prototype.open=function(){var n=this,i=(document.body,document.querySelector(".dialog-backdrop"));return this._loadResolves().then(function(a){var s=a.$scope=a.$scope?a.$scope:r.$new();if(s.dialogId=new Date,e.currentScopes[s.dialogId]=s,n.options.controller){var c=l(n.options.controller,a);n.modalEl.dataset.ngControllerController=n.options.controller,n.options.controllerAs&&(s[n.options.controllerAs]=c)}if(!n.options.controller&&n.options.scope){var c=l("ngMobileDialogController",a);n.modalEl.dataset.ngControllerController="ngMobileDialogController",s=angular.extend(a.$scope,n.options.scope)}n.modalEl.classList.add("dialog");var d=t(n.modalEl)(s)[0];s.options=n.options;var u=n.options.backdrop===!1?!1:!0;u&&i.addEventListener("click",function(){s.resolve()}),s.resolve=function(t){delete e.currentScopes[s.dialogId],n.deferred.resolve(t),n.deferred=null,d.classList.remove("active"),o(function(){s.$destroy(),e.currentDialog=null},100)},s.$on("$destroy",function(){d.remove(),i.remove();var e=new Event("hidden.ngMobileDialog");document.dispatchEvent(e)}),s.$on("$locationChangeSuccess",function(){d.classList.remove("active")}),o(function(){d.classList.add("active"),i.classList.add("in"),n.options.escKey&&(window.onkeydown=function(e){var o=e.keyCode||e.which;27==o&&(e.preventDefault(),s.resolve())})},50)}),this.deferred=a.defer(),this.deferred.promise},c.prototype._loadResolves=function(){var e=[],o=[];return angular.forEach(this.options.resolve||[],function(t,r){o.push(r),e.push(angular.isString(t)?n.get(t):n.invoke(t))}),a.all(e).then(function(e){var t={};return angular.forEach(e,function(e,r){t[o[r]]=e}),t})},{create:function(e,o){function t(t){var r=document.createElement("div");r.classList.add("dialog-backdrop"),r.classList.add("fade");var l=document.body,n=document.createElement("div");n.innerHTML=t,n.querySelector(".modal-header > button.close")&&n.querySelector(".modal-header > button.close").dataset&&(n.querySelector(".modal-header > button.close").dataset.ngClick="resolve()");var a=n.firstChild;l.appendChild(a),l.appendChild(r);var i=new c(e,a);o(i)}if(this.multiple||!document.querySelector(".dialog")||!document.querySelector(".dialog").length){if(!e.template&&!e.templateUrl)throw new Error("Template or template url must be informed!");var r=null;return e.templateUrl&&(r=s.get(e.templateUrl))?void t(r):e.template&&!e.templateUrl?void t(e.template):void i.get(e.templateUrl,{headers:this.headers}).success(function(o){t(o),s.put(e.templateUrl,o)}).error(function(){throw new Error("Can not load dialog template from url: "+e.templateUrl)})}},multiple:this.multiple,headers:this.headers,resolve:function(o){if(e.currentScopes)for(var t in e.currentScopes)if(e.currentScopes.hasOwnProperty(t)){var r=e.currentScopes[t];r.resolve(o)}}}}]})}();